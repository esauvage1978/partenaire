{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} Historique des modifications{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet"
          href="{{ absolute_url( asset('vendor/fancytree/dist/skin-bootstrap/ui.fancytree.min.css')) }}">
{% endblock %}

{% block body_header %}
    <div class="col">
        <h1 class="m-0 text-dark">Historique des modifications </h1>
    </div>
    <div class="col">
        <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a href="{{ path('home') }}">Home</a></li>
            <li class="breadcrumb-item "><a
                        href="{{ data.route }}">Retour</a></li>
        </ol>
    </div>

{% endblock %}

{% block sidebar_sommaire %}
    <li class="nav-item ">
        <a class="nav-link" href="#anchor_name">
            <i class="fa fa-history"></i> Historique
        </a>
    </li>
{% endblock %}
{% block sidebar_button %}

    <a class="btn btn-link text-primary"
       href="{{ data.route }}">Retour</a>

{% endblock %}
    {% block body %}

        <div class="row justify-content-start ">
            <div id="anchor_name" class="jumbotron col-12 text-center text-purple">
                <h3>
                    <a
                       href="{{ data.route }}">
                    <i class="fas fa-history"></i> {{ data.title }}
                    </a>
                </h3>
            </div>

            <div class="card  col-12">

                <div class="card-body">

                    <div class="timeline">
                        <!-- timeline time label -->
                        <div class="time-label">
                            <span class="bg-secondary">Cr√©ation</span>
                        </div>
                        <!-- /.timeline-label -->
                        {% for history in histories %}

                            <!-- timeline item -->
                            <div>
                                <i class="fas fa-external-link-alt "></i>
                                <div class="timeline-item">


                                    <div class=" user-block p-2">
                                        <img class="img-circle img-bordered-sm"
                                             src="{{ history.user.avatar.image }}"
                                             alt="user image">
                                        <span class="username">
                                                          <a href="{{ path('user_show',{'id':history.user.id }) }}">{{ history.user.name }}</a>
                                                        </span>
                                        <span class="description ">
                                                            <span class="time"><i
                                                                        class="fas fa-clock"></i> {{ history.createdAt | date('d-m-Y h:i:s') }}</span>
                                                        </span>
                                    </div>
                                    <div class="timeline-header pb-5">

                                    </div>
                                    <div class="timeline-body mt-1">
                                        <div class="row">
                                            <div class="col-1"></div>
                                            <div class="col-10">
                                                <table id="tableAdministration"
                                                       class="table table-striped"
                                                       style="width:100%">
                                                    <thead>
                                                    <tr>
                                                        <th class="align-middle col-2">Champ</th>
                                                        <th class="align-middle col-5">Ancienne valeur</th>
                                                        <th class="align-middle col-5">Nouvelle valeur</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    {% for row in history.content %}
                                                        <tr>
                                                            <td>{{ row.field }}</td>
                                                            <td>{{ row.oldData | raw}}</td>
                                                            <td>{{ row.newData | raw }}</td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <!-- END timeline item -->

                        {% endfor %}
                        <!-- timeline item -->

                        <!-- END timeline item -->
                        <div>
                            <i class="fas fa-clock bg-gray"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>



    {% endblock %}



{% block javascripts %}
    <script src="{{ absolute_url( asset('js/add_sidebar.js')) }}"></script>
{% endblock %}
